(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>g});var a=n(81),r=n.n(a),i=n(645),s=n.n(i),o=n(667),c=n.n(o),d=new URL(n(564),n.b),l=new URL(n(381),n.b),h=s()(r()),u=c()(d),p=c()(l);h.push([t.id,"* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: #ccc;\n  padding: 0 10px;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  font-family: Arial, sans-serif;\n  font-size: 12px;\n}\n\nh1 {\n  width: 0;\n  height: 0;\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\na {\n  text-decoration: none;\n  color: inherit;\n}\n\nbutton {\n  cursor: pointer;\n  padding: 4px;\n  width: 110px;\n  text-transform: uppercase;\n  font: inherit;\n  font-weight: bold;\n  background: linear-gradient(yellow 35%, green 100%);\n}\n\nheader, footer {\n  margin: 10px 0;\n}\n\nfooter {\n  margin-top: auto;\n  display: flex;\n  justify-content: center;\n}\n\n.footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  min-width: 500px;\n}\n\n.nav {\n  display: flex;\n  gap: 10px;\n}\n\n#app {\n  position: relative;\n  overflow: auto;\n  height: calc(100vh - 80px);\n}\n.year::before {\n  content: '©';\n}\n\n.github {\n  padding-left: 15px;\n  background: url("+u+") no-repeat left center;\n  background-size: 10px 10px;\n}\n\n.rs {\n  width: 27px;\n  height: 10px;\n  background: url("+p+") no-repeat center;\n  background-size: 27px 10px;\n}\n\n.disabled {\n  pointer-events: none;\n  filter: grayscale(1);\n  cursor: auto;\n}\n",""]);const g=h},796:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(81),r=n.n(a),i=n(645),s=n.n(i)()(r());s.push([t.id,".carSVG {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 160px;\n  height: 54px;\n}\n",""]);const o=s},756:(t,e,n)=>{n.d(e,{Z:()=>u});var a=n(81),r=n.n(a),i=n(645),s=n.n(i),o=n(667),c=n.n(o),d=new URL(n(528),n.b),l=s()(r()),h=c()(d);l.push([t.id,".track {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  border-bottom: dashed 2px white;\n  position: relative;\n}\n\n.start__button, .stop__button {\n  width: 29px;\n  border-radius: 5px;\n  background: transparent;\n  border: 2px solid darkred;\n}\n\n.track__car-container {\n  position: relative;\n  height: 54px;\n  width: 100%;\n}\n\n.track__first-line, .track__second-line {\n  display: flex;\n  gap: 10px;\n}\n\n.track__first-line {\n  align-items: center;\n}\n\n.track__car-name {\n  font-weight: bold;\n}\n\n.track__second-line {\n  align-items: flex-start;\n}\n\n.track__flag {\n  position: absolute;\n  bottom: 0;\n  right: 160px;\n  background: url("+h+") center no-repeat;\n  background-size: 50px 50px;\n  width: 50px;\n  height: 50px;\n}\n",""]);const u=l},218:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(81),r=n.n(a),i=n(645),s=n.n(i)()(r());s.push([t.id,".garage {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  height: 100%;\n}\n\n.garage__control {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin: 5px 0;\n}\n\n.create__name, .update__name {\n  text-indent: 10px;\n  width: 230px;\n  height: 26px;\n}\n\n.create__color, .update__color {\n  height: 26px;\n}\n\n.create, .update, .race {\n  display: flex;\n  gap: 10px;\n}\n\n.race__generate {\n  width: 170px;\n}\n\n.garage__race-track {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n",""]);const o=s},262:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(81),r=n.n(a),i=n(645),s=n.n(i)()(r());s.push([t.id,".modal {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 300px;\n  height: auto;\n  padding: 30px 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  border: 2px solid #666;\n  border-radius: 10px;\n  background-color: #888;\n  transform: translate(-50%, -50%);\n}\n\n.modal__text {\n  color: white;\n  font: inherit;\n  text-align: center;\n  line-height: 40px;\n  font-size: 24px;\n}",""]);const o=s},217:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(81),r=n.n(a),i=n(645),s=n.n(i)()(r());s.push([t.id,".pagination {\n  margin-top: auto;\n}\n",""]);const o=s},443:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(81),r=n.n(a),i=n(645),s=n.n(i)()(r());s.push([t.id,'.winners {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  height: 100%;\n}\n\ntable {\n  max-width: 1000px;\n  font-size: 16px;\n}\n\ntable, th, td {\n  border: 1px solid black;\n  border-collapse: collapse;\n  padding: 5px 10px;\n}\n\nth {\n  background: linear-gradient(yellow 35%, green 100%);\n  color: dimgrey;\n}\n\ntd {\n  text-align: center;\n  vertical-align: middle;\n}\n\n.sortable {\n  cursor: pointer;\n  font-weight: bold;\n  color: darkblue;\n}\n\n.car-model {\n  display: block;\n  margin: 0 auto;\n  width: 100px;\n  height: 30px;\n}\n\n.active-sort::after {\n  content: " ▲";\n}\n\n.descending::after {\n  content: " ▼";\n}',""]);const o=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",a=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),a&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),a&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,a,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(a)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);a&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,a=0;a<e.length;a++)if(e[a].identifier===t){n=a;break}return n}function a(t,a){for(var i={},s=[],o=0;o<t.length;o++){var c=t[o],d=a.base?c[0]+a.base:c[0],l=i[d]||0,h="".concat(d," ").concat(l);i[d]=l+1;var u=n(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var g=r(p,a);a.byIndex=o,e.splice(o,0,{identifier:h,updater:g,references:1})}s.push(h)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=a(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var o=n(i[s]);e[o].references--}for(var c=a(t,r),d=0;d<i.length;d++){var l=n(i[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},569:t=>{var e={};t.exports=function(t,n){var a=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},528:(t,e,n)=>{t.exports=n.p+"7e672de7df082e1b2829.svg"},564:(t,e,n)=>{t.exports=n.p+"cadab172d77dc4de24c0.svg"},381:(t,e,n)=>{t.exports=n.p+"2418248d4ccd4e7738a4.svg"}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={id:a,exports:{}};return t[a](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{var t=n(379),e=n.n(t),a=n(795),r=n.n(a),i=n(569),s=n.n(i),o=n(565),c=n.n(o),d=n(216),l=n.n(d),h=n(589),u=n.n(h),p=n(426),g={};function m(t="",e="",n=""){const a=document.createElement(`${t}`);return e&&(a.className=e),n&&(a.innerText=n),a}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t,e){Object.entries(e).forEach((e=>{t.setAttribute(e[0],e[1])}))}g.styleTagTransform=u(),g.setAttributes=c(),g.insert=s().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),e()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals;var w=n(218),f={};f.styleTagTransform=u(),f.setAttributes=c(),f.insert=s().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=l(),e()(w.Z,f),w.Z&&w.Z.locals&&w.Z.locals;var x=n(796),y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=s().bind(null,"head"),y.domAPI=r(),y.insertStyleElement=l(),e()(x.Z,y),x.Z&&x.Z.locals&&x.Z.locals;const C=["M3525 5341 c-72 -18 -79 -28 -90 -121 -4 -30 -11 -62 -16 -71 -4 -9 -97 -51 -206 -94 -774 -304 -1348 -540 -1603 -661 -163 -77 -222 -91 -421 -104 -85 -5 -170 -14 -189 -20 -101 -32 -362 -58 -620 -63 l-115 -2 -47 -80 c-47 -78 -47 -80 -29 -100 34 -36 35 -77 5 -177 -30 -99 -34 -178 -19 -370 5 -67 4 -88 -6 -88 -29 0 -83 -56 -110 -114 -50 -106 -74 -343 -48 -467 13 -58 13 -62 3 -159 -5 -54 16 -238 28 -244 2 -1 29 -20 61 -41 73 -49 123 -103 132 -143 17 -79 167 -155 355 -181 104 -15 969 -97 1087 -104 l32 -2 5 160 c7 230 50 394 146 559 281 479 917 673 1405 429 316 -159 530 -424 598 -742 22 -106 29 -365 13 -519 l-8 -82 3002 0 c2855 0 3002 1 2995 18 -33 87 -56 325 -45 461 28 320 177 567 459 759 399 273 847 282 1243 24 239 -157 397 -392 460 -687 18 -84 15 -341 -5 -430 -8 -38 -14 -71 -12 -73 7 -8 386 20 478 34 180 28 253 65 304 152 24 41 28 57 28 127 -1 44 -9 117 -20 163 -18 79 -18 88 -2 190 31 199 40 306 41 497 1 176 -1 195 -23 260 -46 135 -103 190 -283 274 -222 104 -633 220 -1168 330 -523 108 -1524 210 -2054 211 l-229 0 -236 139 c-813 477 -1593 884 -1852 966 -498 157 -1598 195 -2892 100 l-188 -14 -47 30 c-92 58 -223 89 -297 70z m1912 -311 c13 -45 58 -305 88 -515 33 -226 74 -539 71 -542 -7 -7 -1672 40 -2054 58 -357 16 -464 56 -573 215 -62 91 -87 225 -59 326 12 40 56 74 192 148 369 198 799 289 1618 340 246 15 290 16 510 16 l194 -1 13 -45z m649 10 c383 -36 717 -86 934 -139 210 -52 451 -163 720 -332 141 -88 379 -259 380 -271 0 -5 -14 -8 -32 -8 -48 0 -114 -37 -140 -78 -24 -39 -30 -113 -15 -189 l9 -43 -904 0 -904 0 -176 540 -175 540 47 0 c25 0 141 -9 256 -20z","M2617 3125 c-431 -82 -774 -440 -838 -875 -17 -117 -7 -292 24 -410 113 -436 497 -751 947 -777 507 -29 959 313 1076 813 28 117 26 348 -4 467 -94 378 -383 670 -760 768 -105 27 -336 34 -445 14z m378 -310 c84 -21 209 -85 280 -142 116 -94 210 -242 251 -393 23 -87 24 -260 0 -355 -58 -237 -242 -439 -473 -519 -531 -186 -1074 277 -969 828 30 152 94 274 206 386 111 110 237 178 385 206 84 16 235 11 320 -11z","M2918 2568 c2 -90 7 -167 12 -172 17 -17 108 58 201 166 l51 57 -48 31 c-52 33 -131 65 -185 75 l-34 6 3 -163z","M2591 2700 c-62 -22 -167 -82 -164 -94 3 -13 237 -216 249 -216 7 0 15 7 18 16 8 20 8 127 -1 232 -7 95 -8 96 -102 62z","M3209 2355 c-57 -64 -105 -123 -107 -131 -6 -25 46 -35 157 -29 58 3 121 8 139 11 33 5 34 6 27 42 -7 44 -64 167 -92 201 l-19 24 -105 -118z","M2260 2409 c-31 -44 -68 -133 -77 -186 l-6 -33 155 0 c165 0 201 9 181 44 -13 24 -204 216 -214 216 -5 0 -22 -18 -39 -41z","M2786 2354 c-36 -35 0 -87 44 -64 26 14 26 56 1 70 -25 13 -27 13 -45 -6z","M2751 2186 c-57 -32 -68 -111 -22 -157 43 -42 101 -43 143 -1 42 42 41 100 -1 143 -33 32 -78 38 -120 15z","M2560 2136 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20 -54 2z","M3002 2124 c-27 -19 -28 -36 -3 -58 25 -23 61 -6 61 29 0 33 -30 49 -58 29z","M2245 1993 c-77 -6 -76 -5 -59 -65 16 -55 61 -146 92 -186 l18 -23 103 122 c57 67 104 129 105 138 1 14 -14 16 -104 17 -58 0 -127 -1 -155 -3z","M3165 1981 c-44 -4 -61 -10 -63 -22 -3 -16 210 -229 228 -229 22 0 86 141 105 228 l7 32 -109 -2 c-59 -1 -135 -4 -168 -7z","M2776 1914 c-19 -18 -19 -20 -6 -45 6 -11 21 -19 35 -19 20 0 45 24 45 44 0 10 -32 36 -45 36 -7 0 -21 -7 -29 -16z","M2589 1743 c-86 -90 -139 -151 -139 -162 0 -25 179 -101 236 -101 l27 0 -7 143 c-9 166 -13 187 -35 187 -9 0 -46 -30 -82 -67z","M2936 1801 c-6 -10 -24 -168 -29 -258 -3 -60 -2 -63 19 -63 79 0 262 68 248 92 -5 7 -53 64 -108 126 -93 105 -117 124 -130 103z","M10723 3125 c-318 -58 -597 -266 -743 -555 -223 -441 -98 -996 289 -1288 112 -84 188 -125 311 -166 274 -91 545 -70 802 61 552 282 735 983 392 1500 -225 339 -651 521 -1051 448z m385 -315 c348 -98 579 -443 532 -796 -67 -508 -596 -796 -1055 -574 -239 116 -396 352 -412 620 -20 335 192 640 516 745 122 40 289 42 419 5z","M11017 2568 c3 -90 9 -167 14 -172 13 -14 53 18 155 122 l95 97 -23 18 c-50 40 -189 97 -235 97 -10 0 -11 -33 -6 -162z","M10705 2706 c-50 -16 -133 -58 -163 -82 l-23 -19 121 -107 c67 -60 128 -108 135 -108 23 0 27 39 20 186 -8 162 -4 157 -90 130z","M11307 2354 c-59 -65 -107 -126 -107 -136 0 -11 11 -18 38 -22 44 -7 278 7 289 17 15 16 -51 183 -94 236 l-19 24 -107 -119z","M10362 2413 c-39 -62 -70 -134 -78 -184 l-7 -39 152 0 c86 0 161 5 172 10 17 10 18 13 5 38 -8 15 -59 71 -114 125 l-99 99 -31 -49z","M10888 2359 c-24 -14 -23 -56 2 -69 44 -23 80 29 44 64 -18 19 -23 19 -46 5z","M10851 2187 c-49 -29 -66 -101 -35 -146 9 -13 32 -29 50 -37 29 -12 39 -12 68 0 99 41 85 180 -19 192 -24 3 -50 -1 -64 -9z","M10660 2136 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20 -54 2z","M11096 2124 c-9 -8 -16 -22 -16 -29 0 -13 26 -45 36 -45 20 0 44 25 44 45 0 14 -8 29 -19 35 -25 13 -27 13 -45 -6z","M10335 1991 c-60 -6 -60 -6 -57 -36 9 -69 104 -248 122 -229 57 61 210 250 207 258 -4 12 -176 17 -272 7z","M11267 1983 c-68 -5 -79 -19 -47 -60 23 -31 200 -193 210 -193 3 0 20 24 37 53 29 48 52 111 67 180 l6 27 -107 -2 c-60 -1 -134 -3 -166 -5z","M10870 1910 c-16 -31 4 -62 38 -58 21 2 28 9 30 32 5 45 -47 65 -68 26z","M10651 1703 c-56 -59 -101 -113 -101 -120 0 -28 172 -103 237 -103 l26 0 -7 123 c-10 179 -15 207 -36 207 -10 0 -63 -48 -119 -107z","M11035 1801 c-7 -12 -23 -144 -29 -243 -4 -77 -4 -78 19 -78 45 0 130 22 193 51 l64 29 -19 23 c-65 82 -198 227 -209 227 -7 0 -15 -4 -19 -9z"];function E(t,e){return new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e})}class P{constructor(t,e){this.id=e,this.color=t,this.carSVG=P.createCar(e,t),this.animation=void 0,this.listener=void 0,this.isOnRace=!1}static createCar(t,e){const n={class:"carSVG",id:t,width:"1280.000000pt",height:"640.000000pt",viewBox:"0 0 1280.000000 540.000000"},a=v("svg");b(a,n);const r=v("g");return b(r,{transform:"translate(0.000000,640.000000) scale(0.1000,-0.1000)",fill:"#000000",stroke:"black","stroke-width":"50","stroke-linecap":"square"}),C.forEach((t=>{const e=v("path");e.setAttribute("d",t),r.append(e)})),r.firstChild.setAttribute("fill",e),a.append(r),a}renderCar(){return this.carSVG}move(t){this.animation=this.carSVG.animate([{left:"0"},{left:"calc(100% - 160px"}],{duration:t,fill:"forwards"}),this.isOnRace&&(this.addListener(t),this.isOnRace=!1)}prepareToRace(){this.isOnRace=!0}stop(){this.animation&&this.animation.pause()}reset(){this.animation&&this.animation.cancel()}addListener(t){this.createEventListener(t),this.animation.addEventListener("finish",this.listener,{once:!0})}createEventListener(t){this.listener=()=>{this.carSVG.dispatchEvent(E("winner",{id:this.id,time:t}))}}removeEventListener(){this.listener&&this.animation.removeEventListener("finish",this.listener)}}const _=P;var k=n(756),L={};L.styleTagTransform=u(),L.setAttributes=c(),L.insert=s().bind(null,"head"),L.domAPI=r(),L.insertStyleElement=l(),e()(k.Z,L),k.Z&&k.Z.locals&&k.Z.locals;var M=n(217),S={};S.styleTagTransform=u(),S.setAttributes=c(),S.insert=s().bind(null,"head"),S.domAPI=r(),S.insertStyleElement=l(),e()(M.Z,S),M.Z&&M.Z.locals&&M.Z.locals;const T=class{constructor(t){this.pageName=t,this.prevButton=this.getPrevButton(),this.nextButton=this.getNextButton(),this.pagination=this.create()}create(){const t=m("div","nav pagination");return t.append(this.prevButton,this.nextButton),t}getPrevButton(){const t=m("button","pagination__previous","Prev");return t.addEventListener("click",(()=>{t.dispatchEvent(E(`${this.pageName}-pagination`,{currentPage:-1}))})),t}getNextButton(){const t=m("button","pagination__next","Next");return t.addEventListener("click",(()=>{t.dispatchEvent(E(`${this.pageName}-pagination`,{currentPage:1}))})),t}disablePrev(t=!0){t&&!this.prevButton.classList.contains("disabled")&&this.prevButton.classList.add("disabled"),t||this.prevButton.classList.remove("disabled")}disableNext(t=!0){t&&!this.nextButton.classList.contains("disabled")&&this.nextButton.classList.add("disabled"),t||this.nextButton.classList.remove("disabled")}render(){return this.pagination}};var B=n(262),N={};N.styleTagTransform=u(),N.setAttributes=c(),N.insert=s().bind(null,"head"),N.domAPI=r(),N.insertStyleElement=l(),e()(B.Z,N),B.Z&&B.Z.locals&&B.Z.locals;class z{constructor(){this.carsPerPage=7,this.garage=m("section","garage"),this.updateId=-1,this.updateBlock=this.getUpdateBlock(),this.garageControl=this.getGarageControl(),this.pagination=new T("garage"),this.carsNumber=m("h2","garage__counter","Garage (0)"),this.pageNumber=m("h3","garage__page-number","Page #1"),this.raceTrack=m("div","garage__race-track"),this.garage.append(this.garageControl,this.carsNumber,this.pageNumber,this.raceTrack,this.pagination.render()),this.tracks=[],this.modal=new class{constructor(t){this.modal=m("div","modal"),this.p=m("p","modal__text");const e=m("button","modal__ok","OK");this.modal.append(this.p,e),e.addEventListener("click",(()=>{this.modal.style.display="none"})),t.append(this.modal),this.modal.style.display="none"}setText(t){this.p.innerText=t}show(){this.modal.style.display="flex"}}(this.garage)}getGarageControl(){const t=z.getCreateBlock(),e=this.updateBlock,n=z.getRaceBlock(),a=m("div","garage__control");return a.append(t,e,n),a}static getCreateBlock(){const t=m("div","create"),e=m("input","create__name");e.setAttribute("type","text"),e.setAttribute("placeholder","Enter car name...");const n=m("input","create__color");n.setAttribute("type","color");const a=m("button","create__button","create");return a.addEventListener("click",(()=>{a.dispatchEvent(E("create-car",{name:e.value,color:n.value})),e.value="",n.value="#000000"})),t.append(e,n,a),t}getUpdateBlock(){const t=m("div","update disabled"),e=m("input"," update__name");e.setAttribute("type","text"),e.setAttribute("placeholder","Enter car name...");const n=m("input"," update__color");n.setAttribute("type","color");const a=m("button"," update__button","update");return a.addEventListener("click",(()=>{a.dispatchEvent(E("update-car",{name:e.value,color:n.value,id:this.getUpdateId()})),e.value="",n.value="#000000",this.updateBlock.classList.add("disabled")})),t.append(e,n,a),t}static getRaceBlock(){const t=m("div","race"),e=m("button","race__race","race");e.addEventListener("click",(()=>{e.dispatchEvent(E("start-race"))}));const n=m("button","race__reset","reset");n.addEventListener("click",(()=>{n.dispatchEvent(E("reset-cars"))}));const a=m("button","race__generate","generate cars");return a.addEventListener("click",(()=>{a.dispatchEvent(E("generate-cars"))})),t.append(e,n,a),t}getCarsPerPage(){return this.carsPerPage}setUpdateId(t){this.updateId=t}getUpdateId(){return this.updateId}updateUpdateBlock(t,e){this.updateBlock.firstChild.value=t,this.updateBlock.children[1].value=e,this.updateBlock.classList.remove("disabled")}updateCarsNumber(t){this.carsNumber.innerHTML=`Garage (${t})`}updatePageNumber(t){this.pageNumber.innerHTML=`Page #${t}`}updateRaceTrack(t){this.raceTrack.innerHTML="",this.tracks=[],t.forEach((t=>{const e=new class{constructor(t){this.id=t.id,this.name=t.name,this.color=t.color,this.car=new _(this.color,this.id),this.startEngineButton=m("button","start__button","A"),this.stopEngineButton=m("button","stop__button disabled","B"),this.track=this.createTrack()}createTrack(){const t=m("div","track"),e=m("div","track__flag");return t.append(this.getFirstLine(),this.getSecondLine(),e),t}getFirstLine(){const t=m("div","track__first-line"),e=m("button","select__button","select");e.addEventListener("click",(()=>{e.dispatchEvent(E("select-car",{name:this.name,color:this.color,id:this.id}))}));const n=m("button","remove__button","remove");n.addEventListener("click",(()=>{n.dispatchEvent(E("delete-car",{id:this.id}))}));const a=m("div","track__car-name",this.name);return t.append(e,n,a),t}getSecondLine(){const t=m("div","track__second-line");this.startEngineButton.addEventListener("click",(()=>{this.startEngineButton.dispatchEvent(E("start-engine",{id:this.id})),this.startEngineButton.classList.add("disabled"),this.stopEngineButton.classList.remove("disabled")})),this.stopEngineButton.addEventListener("click",(()=>{this.stopEngineButton.dispatchEvent(E("stop-engine",{id:this.id})),this.startEngineButton.classList.remove("disabled"),this.stopEngineButton.classList.add("disabled")}));const e=m("div","track__car-container");return e.append(this.car.renderCar()),t.append(this.startEngineButton,this.stopEngineButton,e),t}getStartButton(){return this.startEngineButton}getStopButton(){return this.stopEngineButton}getCar(){return this.car}render(){return this.track}}(t);this.tracks.push(e),this.raceTrack.append(e.render())}))}startCar(t,e){const n=this.findCar(t);n&&n.move(e)}startCars(){this.tracks.forEach((t=>{t.getStartButton().dispatchEvent(new Event("click")),t.getCar().prepareToRace()}))}stopCar(t){const e=this.findCar(t);e&&e.stop()}resetCar(t){const e=this.findCar(t);e&&e.reset()}resetCars(){this.tracks.forEach((t=>t.getStopButton().dispatchEvent(new Event("click"))))}findCar(t){const e=this.tracks.find((e=>e.getCar().id===t));if(e)return e.getCar()}updatePage(t,e,n){this.updateCarsNumber(t),this.updatePageNumber(e),this.updateRaceTrack(n)}disablePrevButton(t){this.pagination.disablePrev(t)}disableNextButton(t){this.pagination.disableNext(t)}render(){return this.garage}toggleBlockUI(){this.garageControl.classList.toggle("disabled"),this.pagination.render().classList.toggle("disabled")}clearOtherWinners(){this.tracks.forEach((t=>t.getCar().removeEventListener()))}popupModal(t){this.modal.setText(t),this.modal.show()}}const A=z,H=class{constructor(){this.endpoint="https://async-race-api-909.herokuapp.com/"}},V=class extends H{constructor(){super(),this.endpoint+="garage"}async getCar(t){const e=`?id=${t}`;let n;try{const t=await fetch(this.endpoint+e,{method:"GET"});n=await t.json()}catch(t){console.error(t)}return n[0]}getCars(t,e=7){const n=`?_page=${t}&_limit=${e}`;return fetch(this.endpoint+n,{method:"GET"}).then((t=>({totalCars:t.headers.get("X-Total-Count")||"",cars:t.json()}))).catch((t=>console.error(t)))}createCar(t,e){return fetch(this.endpoint+"",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:e})}).then((t=>t.status)).catch((t=>console.error(t)))}deleteCar(t){const e=`/${t}`;return fetch(this.endpoint+e,{method:"DELETE"}).then((t=>t.json())).catch((t=>console.error(t)))}updateCar(t,e,n){const a=`/${n}`;return fetch(this.endpoint+a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,color:e})}).then((t=>t.json())).catch((t=>console.error(t)))}};function Z(){const t=["Audi","Alfa Romeo","Alpina","Aston Martin","Axon","Ford","Ferrari","Fiat","GAZ","GMC","Honda","Hummer","Hyundai","Infiniti","Isuzu","JAC","Jaguar","Jeep","Kamaz","Lada","Lexus","Lotus","MAN","Maybach","MAZ","Mazda","McLaren","Nissan","Opel","Paccar","Pagani","Pontiac","Porsche","Renault","Skoda","Smart","Subaru","Suzuki","Tesla","Toyota","UAZ","Volvo","ZAZ","XPeng","TVR","Saab","RAM","Chevrolet","Mazzanti","Daewoo"],e=["Roadster","S","X","3","Y","Cybertruck","X5","X7","X3","X6","GT4","FXX","599 GTO","Enzo","458 Italia","250 GTO","Priora","4x4","Rio","Focus","Kalina","Vesta","Spark","Lacetti","Nexia","Matiz","Cobalt","Captiva","A7","A5","A3","A8","TT","Corolla","Camry","RAV4","Impreza","WRX","ES","LS","RX","GX","LX","GS","LC500","Gallardo","Aventador","911","Cayenne","FX37"];return`${t[Math.floor(t.length*Math.random())]} ${e[Math.floor(e.length*Math.random())]}`}var W,R,$,G;!function(t){t[t.OK=200]="OK",t[t.Created=201]="Created",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.NotFound=404]="NotFound",t[t.TooManyRequests=429]="TooManyRequests",t[t.InternalServerError=500]="InternalServerError"}(W||(W={})),function(t){t.started="started",t.stopped="stopped",t.drive="drive"}(R||(R={})),function(t){t.id="id",t.wins="wins",t.time="time"}($||($={})),function(t){t.asc="ASC",t.desc="DESC"}(G||(G={}));const I=class{constructor(){this.error=m("div","error","No such page found")}render(){return this.error}};var O=n(443),j={};j.styleTagTransform=u(),j.setAttributes=c(),j.insert=s().bind(null,"head"),j.domAPI=r(),j.insertStyleElement=l(),e()(O.Z,j),O.Z&&O.Z.locals&&O.Z.locals;class U{constructor(){this.winners=m("section","winners"),this.pagination=new T("winners"),this.winnersNumber=m("h2","winners__counter","Winners (0)"),this.pageNumber=m("h3","winners__page-number","Page #1"),this.winnersPerPage=10,this.tbody=m("tbody","winners__table_body"),this.sortableHeaders=[],this.winners.append(this.winnersNumber,this.pageNumber,this.createTable(),this.pagination.render())}createTable(){const t=m("table","winners__table");["10%","30%","30%","15%","15%"].forEach((e=>{const n=m("col");n.setAttribute("width",e),t.append(n)}));const e=this.createTableHeader();return t.append(e,this.tbody),t}createTableHeader(){const t=m("thead","winners__table_header"),e=m("tr");return Object.entries({id:{name:"ID",sortable:!0},car:{name:"Car",sortable:!1},name:{name:"Name",sortable:!1},wins:{name:"Wins",sortable:!0},time:{name:"Best Time",sortable:!0}}).forEach((([t,n])=>{let a=`header-${t}`;n.sortable&&(a+=" sortable"),"id"===t&&(a+=" active-sort");const r=m("th",a,n.name);n.sortable&&(U.addSortListener(r,t),this.sortableHeaders.push(r)),e.append(r)})),t.append(e),t}static addSortListener(t,e){t.addEventListener("click",(()=>{t.dispatchEvent(E("sort",{variant:e}))}))}toggleDescending(t){this.sortableHeaders.forEach((e=>{e.classList.contains(`header-${t}`)&&e.classList.toggle("descending")}))}changeSort(t){this.sortableHeaders.forEach((t=>{t.classList.contains("active-sort")&&t.classList.remove("active-sort"),t.classList.contains("descending")&&t.classList.remove("descending")})),this.sortableHeaders.forEach((e=>{e.classList.contains(`header-${t}`)&&e.classList.add("active-sort")}))}updateTable(t,e){this.tbody.innerHTML="";for(let n=0;n<t.length;n+=1){const a=m("tr"),{id:r}=e[n];[r,t[n].name,e[n].wins,`${e[n].time.toFixed(3)} s`].forEach((t=>{const e=m("td","",t.toString());a.append(e)})),U.insertCarSVG(a,t[n].color,r),this.tbody.append(a)}}static insertCarSVG(t,e,n){const a=new _(e,n).renderCar();a.classList.remove("carSVG"),a.classList.add("car-model");const r=m("td","svg-wrapper");r.append(a),t.insertBefore(r,t.firstChild?.nextSibling)}getWinnersPerPage(){return this.winnersPerPage}updateWinnersNumber(t){this.winnersNumber.innerHTML=`Winners (${t})`}updatePageNumber(t){this.pageNumber.innerHTML=`Page #${t}`}disablePrevButton(t){this.pagination.disablePrev(t)}disableNextButton(t){this.pagination.disableNext(t)}render(){return this.winners}}const D=U,F=class extends H{constructor(){super(),this.endpoint+="engine"}startOrStop(t,e){const n=`?id=${t}&status=${e}`;return fetch(this.endpoint+n,{method:"PATCH"}).then((t=>t.json())).catch((t=>console.error(t)))}drive(t){const e=`?id=${t}&status=drive`;return fetch(this.endpoint+e,{method:"PATCH"}).then((t=>t.status===W.OK||(t.status,W.InternalServerError,!1))).catch((t=>t.log(t)))}},X=class extends H{constructor(){super(),this.endpoint+="winners"}getWinner(t){const e=`?id=${t}`;return fetch(this.endpoint+e,{method:"GET"}).then((t=>t.json())).then((t=>t[0])).catch((()=>{}))}async getWinners(t,e=10,n=$.id,a="ASC"){const r=`?_page=${t}&_limit=${e}&_sort=${n}&_order=${a}`;return fetch(this.endpoint+r,{method:"GET"}).then((t=>({totalWinners:t.headers.get("X-Total-Count")||"",winners:t.json()}))).catch((()=>{}))}createWinner(t){return fetch(this.endpoint+"",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,wins:t.wins,time:t.time})}).then((t=>t.json())).catch((()=>{}))}deleteWinner(t){const e=`/${t}`;return fetch(this.endpoint+e,{method:"DELETE"}).then((t=>t.json())).catch((()=>{}))}updateWinner(t){const e=`/${t.id}`;return fetch(this.endpoint+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,wins:t.wins,time:t.time})}).then((t=>t.json())).catch((()=>{}))}};(async()=>{const t=new V,e=new F,n=new X,a=new A,r=new D,i=new class{constructor(t,e,n){this.garageModel=t,this.raceModel=e,this.view=n,this.carsBatchSize=100,this.carsPerPage=this.view.getCarsPerPage(),this.currentGarageCarsCount=4,this.currentPage=1,this.createHandler(),this.updateHandler(),this.generateCarsHandler(),this.selectHandler(),this.deleteHandler(),this.paginationHandler(),this.startEngineHandler(),this.stopEngineHandler(),this.startRaceHandler(),this.resetCarsHandler()}async init(){await this.updateView()}async updateView(){const{cars:t,totalCars:e}=await this.garageModel.getCars(this.currentPage,this.carsPerPage);this.currentGarageCarsCount=Number(e),this.view.updatePage(this.currentGarageCarsCount.toString(),this.currentPage.toString(),await t),this.updatePaginationButtonsStyle()}createHandler(){document.addEventListener("create-car",(async t=>{t.detail.name?t.detail.color&&(await this.garageModel.createCar(t.detail.name,t.detail.color),this.currentGarageCarsCount+=1,await this.updateView(),this.updatePaginationButtonsStyle()):alert("Car's name could not be empty!")}))}updateHandler(){document.addEventListener("update-car",(async t=>{t.detail.name?t.detail.color&&t.detail.id&&(await this.garageModel.updateCar(t.detail.name,t.detail.color,t.detail.id),await this.updateView()):alert("Car's name could not be empty!")}))}generateCarsHandler(){document.addEventListener("generate-cars",(async()=>{const t=[];for(let e=0;e<this.carsBatchSize;e+=1)t.push(this.garageModel.createCar(Z(),`#${Math.floor(16777215*Math.random()).toString(16)}`));await Promise.allSettled(t),this.currentGarageCarsCount+=100,await this.updateView()}))}selectHandler(){document.addEventListener("select-car",(async t=>{t.detail.name&&t.detail.color&&t.detail.id&&(this.view.setUpdateId(t.detail.id),this.view.updateUpdateBlock(t.detail.name,t.detail.color))}))}deleteHandler(){document.addEventListener("delete-car",(async t=>{t.detail.id&&(await this.garageModel.deleteCar(t.detail.id),this.currentGarageCarsCount-=1,this.currentGarageCarsCount/this.carsPerPage<=this.currentPage-1&&this.currentPage>1&&(this.currentPage-=1),await this.updateView())}))}paginationHandler(){document.addEventListener("garage-pagination",(async t=>{t.detail.currentPage>0&&this.currentGarageCarsCount/this.carsPerPage>this.currentPage&&(this.currentPage+=1),t.detail.currentPage<0&&this.currentPage>1&&(this.currentPage-=1),await this.updateView()}))}updatePaginationButtonsStyle(){1===this.currentPage?this.view.disablePrevButton(!0):this.view.disablePrevButton(!1);const t=Math.ceil(this.currentGarageCarsCount/this.carsPerPage);this.currentPage<t?this.view.disableNextButton(!1):this.view.disableNextButton(!0)}startEngineHandler(){document.addEventListener("start-engine",(async t=>{const{id:e}=t.detail;if(e){const t=await this.raceModel.startOrStop(e,R.started),n=t.distance/t.velocity;this.view.startCar(e,n),await this.raceModel.drive(e)||this.view.stopCar(e)}}))}stopEngineHandler(){document.addEventListener("stop-engine",(async t=>{const{id:e}=t.detail;e&&(this.raceModel.startOrStop(e,R.stopped).then((t=>t.velocity)),this.view.resetCar(e))}))}startRaceHandler(){document.addEventListener("start-race",(async()=>{await this.view.resetCars(),this.view.startCars(),this.view.toggleBlockUI()}))}resetCarsHandler(){document.addEventListener("reset-cars",(async()=>{await this.view.resetCars()}))}}(t,e,a);await i.init();const s=new class{constructor(t,e,n,a){this.garageModel=t,this.winnerModel=e,this.winnersView=a,this.garageView=n,this.currentWinnersCount=1,this.currentPage=1,this.winnersPerPage=this.winnersView.getWinnersPerPage(),this.sortVariant=$.id,this.sortDirection=G.asc,this.detectWinnerHandler(),this.removeWinnerHandler(),this.paginationHandler(),this.sortHandler(),this.updateHandler()}async init(){await this.updateWinnersView()}async updateWinnersView(){const{totalWinners:t,winners:e}=await this.winnerModel.getWinners(this.currentPage,this.winnersPerPage,this.sortVariant,this.sortDirection);this.winnersView.updatePageNumber(this.currentPage.toString()),this.winnersView.updateWinnersNumber(t),this.currentWinnersCount=Number(t);const n=[];(await e).forEach((t=>{n.push(this.getCarProperty(t.id))}));const a=(await Promise.allSettled(n)).filter((t=>"fulfilled"===t.status)).map((t=>t.value));this.winnersView.updateTable(a,await e),this.updatePaginationButtonsStyle()}async getCarProperty(t){return this.garageModel.getCar(t)}detectWinnerHandler(){document.addEventListener("winner",(async t=>{this.garageView.clearOtherWinners(),this.garageView.toggleBlockUI();const e=t.detail.id,n=Number((t.detail.time/1e3).toFixed(3)),a=await this.garageModel.getCar(t.detail.id);this.garageView.popupModal(`${a?.name} wins\n with time ${n} s`);const r=await this.winnerModel.getWinner(e);if(r){const t=r.time>n?n:r.time;await this.winnerModel.updateWinner({id:e,wins:r.wins+1,time:t})}else await this.winnerModel.createWinner({id:e,wins:1,time:n});await this.updateWinnersView()}))}removeWinnerHandler(){document.addEventListener("delete-car",(async t=>{t.detail.id&&(await this.winnerModel.deleteWinner(t.detail.id),await this.updateWinnersView())}))}paginationHandler(){document.addEventListener("winners-pagination",(async t=>{t.detail.currentPage>0&&this.currentWinnersCount/this.winnersPerPage>this.currentPage&&(this.currentPage+=1),t.detail.currentPage<0&&this.currentPage>1&&(this.currentPage-=1),await this.updateWinnersView()}))}updatePaginationButtonsStyle(){1===this.currentPage?this.winnersView.disablePrevButton(!0):this.winnersView.disablePrevButton(!1);const t=Math.ceil(this.currentWinnersCount/this.winnersPerPage);this.currentPage<t?this.winnersView.disableNextButton(!1):this.winnersView.disableNextButton(!0)}sortHandler(){document.addEventListener("sort",(async t=>{t.detail.variant===this.sortVariant?(this.toggleSortDirection(),this.winnersView.toggleDescending(t.detail.variant)):(this.sortVariant=t.detail.variant,this.winnersView.changeSort(t.detail.variant)),await this.updateWinnersView()}))}toggleSortDirection(){this.sortDirection===G.asc?this.sortDirection=G.desc:this.sortDirection=G.asc}updateHandler(){document.addEventListener("update-car",(async()=>{await this.updateWinnersView()}))}}(t,n,a,r);await s.init();const o=new class{constructor(){this.root=document.querySelector("#app"),this.routes=[{path:"404",content:(new I).render()}]}addPath(t,e){this.routes.push({path:t,content:e})}parseRoute(){const t=window.location.hash.slice(1);return this.routes.find((e=>e.path===t))||this.routes[0]}renderRoute(){const t=this.parseRoute();this.root.innerHTML="",this.root.append(t.content)}init(t){window.addEventListener("hashchange",this.renderRoute.bind(this)),window.location.hash=t,this.renderRoute()}};o.addPath("garage",a.render()),o.addPath("winners",r.render()),o.init("garage"),console.log('  Самооценка - 190 баллов.\n  Хочется верить, что ничего не проморгал и все формальные требования ТЗ были выполнены.\n  Наверняка можно накопать баги или факты нелогичного поведения, если специально искать, например,\n  быстро делая много разных запросов к серверу, но это уже какая-то DDoS атака получается. 😊\n  Могу добавить, что детям папина игра "в гоночки" понравилась. 👍')})()})()})();